{"version":3,"file":"index.js","sources":["../src/js/weather-api.js","../src/img/icons.svg?url","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = '324d82384f0b6b757e9697b6aa6e9ef8';\n\nexport async function getWeatherData(city) {\n  const searchParam = new URLSearchParams({\n    q: city,\n    appid: apiKey,\n    units: 'metric',\n  });\n\n  const response = await axios.get(\n    `https://api.openweathermap.org/data/2.5/weather?${searchParam}`\n  );\n\n  return response.data;\n}\n\nexport async function getWeatherByCoords(lan, lot) {\n  const searchParam = new URLSearchParams({\n    lan,\n    lot,\n    appid: apiKey,\n    units: 'metric',\n  });\n\n  const response = await axios.get(\n    `https://api.openweathermap.org/data/2.5/weather?${searchParam}`\n  );\n\n  return response.data;\n}\n","export default \"__VITE_ASSET__eTtvedRy__\"","import sprite from '../img/icons.svg?url';\n\nconst weatherCard = document.querySelector('.weather-card');\n\nconst iconMap = {\n  '01d': 'icon-sun',\n  '01n': 'icon-sun',\n  '02d': 'icon-cloudy_and_sun',\n  '02n': 'icon-cloudy_and_sun',\n  '03d': 'icon-cloudy',\n  '03n': 'icon-cloudy',\n  '04d': 'icon-cloudy',\n  '04n': 'icon-cloudy',\n  '09d': 'icon-weather',\n  '09n': 'icon-weather',\n  '10d': 'icon-weather',\n  '10n': 'icon-weather',\n  '11d': 'icon-weather',\n  '11n': 'icon-weather',\n  '13d': 'icon-snow',\n  '13n': 'icon-snow',\n  '50d': 'icon-cloudy',\n  '50n': 'icon-cloudy',\n};\n\nexport function createWeatherCard(data) {\n  const { city, country, temp, tempMin, tempMax, icon } = data;\n\n  const iconClass = iconMap[icon] || 'icon-sun';\n\n  const markup = `\n                <svg class=\"weather-icon\">\n                    <use href=\"${sprite}#${iconClass}\"></use>\n                </svg>\n                <p class=\"weather-location\">${city}, ${country}</p>\n                <div class=\"weather-temp-wrapper\">\n                  <p class=\"weather-temp\">${temp}&deg;</p>\n                  <ul class=\"temp-box\">\n                    <li class=\"temp-item\">\n                      <p class=\"temp-name\">min</p>\n                      <p class=\"temp-value\">${tempMin}&deg;</p>\n                    </li>\n                    <li class=\"temp-item\">\n                      <p class=\"temp-name\">max</p>\n                      <p class=\"temp-value\">${tempMax}&deg;</p>\n                    </li>\n                  </ul>\n                </div>\n    `;\n\n  weatherCard.innerHTML = markup;\n  weatherCard.style.display = 'block';\n}\n\nexport function clearWeatherCard() {\n  weatherCard.innerHTML = '';\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getWeatherData, getWeatherByCoords } from './js/weather-api';\nimport { createWeatherCard, clearWeatherCard } from './js/render-function';\n\nconst input = document.querySelector('.header-input');\n\nasync function showWeatherByCoords(lat, lon) {\n  try {\n    const data = await getWeatherByCoords(lat, lon);\n    createWeatherCard({\n      city: data.name,\n      country: data.sys.country,\n      temp: Math.round(data.main.temp),\n      tempMin: Math.round(data.main.temp_min),\n      tempMax: Math.round(data.main.temp_max),\n      icon: data.weather[0].icon,\n    });\n  } catch (err) {\n    iziToast.show({\n      message: 'Cannot get local weather',\n      position: 'topRight',\n      timeout: 5000,\n    });\n  }\n}\n\nwindow.addEventListener('load', () => {\n  if (navigator.geolocation) {\n    navigator.geolocation.getCurrentPosition(\n      position => {\n        const { latitude, longitude } = position.coords;\n        showWeatherByCoords(latitude, longitude);\n      },\n      () => {\n        iziToast.show({\n          message: 'Geolocation denied, enter city manually',\n          position: 'topRight',\n          timeout: 5000,\n        });\n      }\n    );\n  } else {\n    iziToast.show({\n      message: 'Geolocation not supported',\n      position: 'topRight',\n      timeout: 5000,\n    });\n  }\n});\n\ninput.addEventListener('keydown', async e => {\n  if (e.key === 'Enter') {\n    const city = input.value.trim();\n\n    if (!city) {\n      iziToast.show({\n        message: 'Enter the city',\n        position: 'topRight',\n        timeout: 5000,\n      });\n\n      return;\n    }\n\n    clearWeatherCard();\n\n    try {\n      const data = await getWeatherData(city);\n      createWeatherCard({\n        city: data.name,\n        country: data.sys.country,\n        temp: Math.round(data.main.temp),\n        tempMin: Math.round(data.main.temp_min),\n        tempMax: Math.round(data.main.temp_max),\n        icon: data.weather[0].icon,\n      });\n    } catch (err) {\n      iziToast.show({\n        message: 'City not found',\n        position: 'topRight',\n        timeout: 5000,\n      });\n    }\n  }\n});\n"],"names":["apiKey","getWeatherData","city","searchParam","axios","getWeatherByCoords","lan","lot","sprite","weatherCard","iconMap","createWeatherCard","data","country","temp","tempMin","tempMax","icon","iconClass","markup","clearWeatherCard","input","showWeatherByCoords","lat","lon","iziToast","position","latitude","longitude","e"],"mappings":"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"}
{"version":3,"file":"index.js","sources":["../src/js/weather-api.js","../src/img/icons.svg?url","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = '324d82384f0b6b757e9697b6aa6e9ef8';\n\nexport async function getWeatherData(city) {\n  const searchParam = new URLSearchParams({\n    q: city,\n    appid: apiKey,\n    units: 'metric',\n  });\n\n  const response = await axios.get(\n    `https://api.openweathermap.org/data/2.5/weather?${searchParam}`\n  );\n\n  return response.data;\n}\n\nexport async function getWeatherByCoords(lat, lon) {\n  const searchParam = new URLSearchParams({\n    lat,\n    lon,\n    appid: apiKey,\n    units: 'metric',\n  });\n\n  const response = await axios.get(\n    `https://api.openweathermap.org/data/2.5/weather?${searchParam}`\n  );\n\n  return response.data;\n}\n","export default \"__VITE_ASSET__eTtvedRy__\"","import sprite from '../img/icons.svg?url';\n\nconst weatherCard = document.querySelector('.weather-card');\nconst dateInfo = document.querySelector('.datetime-card');\n\nconst iconMap = {\n  '01d': 'icon-sun',\n  '01n': 'icon-sun',\n  '02d': 'icon-cloudy_and_sun',\n  '02n': 'icon-cloudy_and_sun',\n  '03d': 'icon-cloudy',\n  '03n': 'icon-cloudy',\n  '04d': 'icon-cloudy',\n  '04n': 'icon-cloudy',\n  '09d': 'icon-weather',\n  '09n': 'icon-weather',\n  '10d': 'icon-weather',\n  '10n': 'icon-weather',\n  '11d': 'icon-weather',\n  '11n': 'icon-weather',\n  '13d': 'icon-snow',\n  '13n': 'icon-snow',\n  '50d': 'icon-cloudy',\n  '50n': 'icon-cloudy',\n};\n\nexport function createWeatherCard(data) {\n  const {\n    city,\n    country,\n    temp,\n    tempMin,\n    tempMax,\n    icon,\n    day,\n    weekday,\n    month,\n    time,\n    sunrise,\n    sunset,\n  } = data;\n\n  const iconClass = iconMap[icon] || 'icon-sun';\n\n  const weatherMarkup = `\n                <svg class=\"weather-icon\">\n                    <use href=\"${sprite}#${iconClass}\"></use>\n                </svg>\n                <p class=\"weather-location\">${city}, ${country}</p>\n                <div class=\"weather-temp-wrapper\">\n                  <p class=\"weather-temp\">${temp}&deg;</p>\n                  <ul class=\"temp-box\">\n                    <li class=\"temp-item\">\n                      <p class=\"temp-name\">min</p>\n                      <p class=\"temp-value\">${tempMin}&deg;</p>\n                    </li>\n                    <li class=\"temp-item\">\n                      <p class=\"temp-name\">max</p>\n                      <p class=\"temp-value\">${tempMax}&deg;</p>\n                    </li>\n                  </ul>\n                </div>\n    `;\n\n  const dateMarkup = `\n            <ul class=\"datetime-wrapper\">\n              <li class=\"datetime-day\">${day}</li>\n              <li class=\"datetime-weekday\">${weekday}</li>\n            </ul>\n            <ul class=\"datetime-wrapper\">\n              <li class=\"datetime-month\">${month}</li>\n              <li class=\"datetime-time\">${time}</li>\n            </ul>\n              <ul class=\"datetime-wrapper\">\n              <li>\n                <svg class=\"datetime-icon\">\n                  <use href=\"./img/icons.svg#icon-sunrise\"></use>\n                </svg>\n                <p class=\"datetime-sunrise\">${sunrise}</p>\n              </li>\n              <li>\n                <svg class=\"datetime-icon\">\n                  <use href=\"./img/icons.svg#icon-sunset\"></use>\n                </svg>\n                <p class=\"datetime-sunset\">${sunset}</p>\n              </li>\n            </ul>\n  `;\n\n  weatherCard.innerHTML = weatherMarkup;\n  weatherCard.style.display = 'block';\n\n  dateInfo.innerHTML = dateMarkup;\n  dateInfo.style.display = 'block';\n}\n\nexport function clearWeatherCard() {\n  weatherCard.innerHTML = '';\n}\n\nexport function clearDateInfoCard() {\n  dateInfo.innerHTML = '';\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getWeatherData, getWeatherByCoords } from './js/weather-api';\nimport {\n  createWeatherCard,\n  clearWeatherCard,\n  clearDateInfoCard,\n} from './js/render-function';\n\nconst input = document.querySelector('.header-input');\n\nfunction getDateInfo() {\n  const now = new Date();\n\n  const day = now.getDate();\n  const weekday = now.toLocaleDateString('en-US', { weekday: 'short' });\n  const month = now.toLocaleDateString('en-US', { month: 'long' });\n  const time = now.toLocaleTimeString('en-GB', {\n    hour: '2-digit',\n    minute: '2-digit',\n    second: '2-digit',\n  });\n\n  return {\n    day: `${day}<sup>${getOrdinalSuffix(day)}</sup>`,\n    weekday,\n    month,\n    time,\n  };\n}\n\nfunction getOrdinalSuffix(day) {\n  if (day > 3 && day < 21) return 'th';\n  switch (day % 10) {\n    case 1:\n      return 'st';\n    case 2:\n      return 'nd';\n    case 3:\n      return 'rd';\n    default:\n      return 'th';\n  }\n}\n\nfunction formatSunTime(unix, timezone) {\n  return new Date((unix + timezone) * 1000).toUTCString().slice(17, 22);\n}\n\nasync function showWeatherByCoords(lat, lon) {\n  try {\n    const data = await getWeatherByCoords(lat, lon);\n    const dateInfo = getDateInfo();\n\n    createWeatherCard({\n      city: data.name,\n      country: data.sys.country,\n      temp: Math.round(data.main.temp),\n      tempMin: Math.round(data.main.temp_min),\n      tempMax: Math.round(data.main.temp_max),\n      icon: data.weather[0].icon,\n\n      day: dateInfo.day,\n      weekday: dateInfo.weekday,\n      month: dateInfo.month,\n      time: dateInfo.time,\n      sunrise: formatSunTime(data.sys.sunrise, data.timezone),\n      sunset: formatSunTime(data.sys.sunset, data.timezone),\n    });\n  } catch (err) {\n    iziToast.show({\n      message: 'Cannot get local weather',\n      position: 'topRight',\n      timeout: 5000,\n    });\n  }\n}\n\nwindow.addEventListener('load', () => {\n  const fallbackCity = {\n    lat: 50.4501,\n    lon: 30.5234,\n    city: 'Kyiv',\n    country: 'UA',\n  };\n\n  if (navigator.geolocation) {\n    navigator.geolocation.getCurrentPosition(\n      position => {\n        const { latitude, longitude } = position.coords;\n        showWeatherByCoords(latitude, longitude);\n      },\n      () => {\n        iziToast.show({\n          message: 'Geolocation denied, enter city manually',\n          position: 'topRight',\n          timeout: 5000,\n        });\n\n        showWeatherByCoords(\n          fallbackCity.lat,\n          fallbackCity.lon,\n          fallbackCity.city,\n          fallbackCity.country\n        );\n      }\n    );\n  } else {\n    iziToast.show({\n      message: 'Geolocation not supported',\n      position: 'topRight',\n      timeout: 5000,\n    });\n\n    showWeatherByCoords(\n      fallbackCity.lat,\n      fallbackCity.lon,\n      fallbackCity.city,\n      fallbackCity.country\n    );\n  }\n});\n\ninput.addEventListener('keydown', async e => {\n  if (e.key === 'Enter') {\n    const city = input.value.trim();\n\n    if (!city) {\n      iziToast.show({\n        message: 'Enter the city',\n        position: 'topRight',\n        timeout: 5000,\n      });\n\n      return;\n    }\n\n    clearWeatherCard();\n    clearDateInfoCard();\n\n    try {\n      const data = await getWeatherData(city);\n      const dateInfo = getDateInfo();\n\n      createWeatherCard({\n        city: data.name,\n        country: data.sys.country,\n        temp: Math.round(data.main.temp),\n        tempMin: Math.round(data.main.temp_min),\n        tempMax: Math.round(data.main.temp_max),\n        icon: data.weather[0].icon,\n\n        day: dateInfo.day,\n        weekday: dateInfo.weekday,\n        month: dateInfo.month,\n        time: dateInfo.time,\n        sunrise: formatSunTime(data.sys.sunrise, data.timezone),\n        sunset: formatSunTime(data.sys.sunset, data.timezone),\n      });\n    } catch (err) {\n      iziToast.show({\n        message: 'City not found',\n        position: 'topRight',\n        timeout: 5000,\n      });\n    }\n  }\n});\n"],"names":["apiKey","getWeatherData","city","searchParam","axios","getWeatherByCoords","lat","lon","sprite","weatherCard","dateInfo","iconMap","createWeatherCard","data","country","temp","tempMin","tempMax","icon","day","weekday","month","time","sunrise","sunset","iconClass","weatherMarkup","dateMarkup","clearWeatherCard","clearDateInfoCard","input","getDateInfo","now","getOrdinalSuffix","formatSunTime","unix","timezone","showWeatherByCoords","iziToast","fallbackCity","position","latitude","longitude","e"],"mappings":"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"}